title1 'Symulacja ARMA(2,3)';
data a;
u1=0; u2=0; a1=0; a2=0; a3=0;
do i = -100 to 2000;
a= 0.4*rannor (32565);
u = 5.0+0.14*u1 + 0.71*u2 + a - 0.5*a1 + 0.7*a2+0.2*a3;
if i > 0 then output;
u2=u1; u1 = u; a3=a2; a2 = a1; a1 = a;
end;
run;
proc means data=a mean max min std;
title 'Statystyki dla a';
run;
proc sgplot data=a;
series y=u x=i;
title 'zbior ARIMA(2,3)';
run;
title "Arima 1 1";
proc arima data=a;
identify var=u scan;
estimate p=1 q=1;
run;
forecast lead=12 id=i out=result1;
quit;

data result1;
	set result1;
	MSE = residual*residual;
run;
	
	proc means data = result1 mean;
	title "Set 1";
	var MSE;
	run;
	
title "Arima 2 3";
proc arima data=a;
identify var=u scan;
estimate p=2 q=3;
run;
forecast lead=12 id=i out=result2;
quit;
data result2;
	set result2;
	MSE = residual*residual;
	run;
	
proc means data=result2 mean;
	title "Set 2";
	var MSE;
run;
/*
data a;
u1=0; u2=0; a1=0; a2=0; a3=0;
do i = -100 to 2000;
a= 0.4*rannor (32565);
u = 5.0+0.14*u1 + 0.71*u2 + a - 0.5*a1 + 0.7*a2+0.2*a3;
if i > 0 then output;
u2=u1; u1 = u; a3=a2; a2 = a1; a1 = a;
end;
run;
proc arima data=a;
identify var=u nlag=24;
run;
estimate p=1 q=1;
run;
outlier;
run;
forecast lead=12 interval=100 id=i out=results;
run;
identify var=u(1);
run;
estimate p=1 q=1;
run;
outlier;
run;
forecast lead=12 interval=100 id=i out=results1;
run;
quit;
